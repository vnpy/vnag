# 使用图形界面

VNAG 提供了基于 PySide6 的现代化图形界面，让您可以直观地管理和调试 Agent。

## 启动 UI

```bash
python examples/ui/run_chat_ui.py
```

## 界面概览

启动后，您将看到一个包含以下区域的界面：

```
┌─────────────────────────────────────────────────────────────┐
│  菜单栏                                                      │
├──────────────┬──────────────────────────────────────────────┤
│              │                                              │
│  会话列表     │              聊天区域                         │
│              │                                              │
│  - 会话1     │  ┌────────────────────────────────────────┐  │
│  - 会话2     │  │ 消息显示区                              │  │
│  - ...       │  │                                        │  │
│              │  └────────────────────────────────────────┘  │
│              │                                              │
│              │  ┌────────────────────────────────────────┐  │
│              │  │ 输入框                                  │  │
│              │  └────────────────────────────────────────┘  │
├──────────────┴──────────────────────────────────────────────┤
│  状态栏                                                      │
└─────────────────────────────────────────────────────────────┘
```

## 配置 API 服务

首次使用需要配置 AI 服务：

1. 点击菜单栏 **功能** → **AI服务配置**
2. 在对话框中填写：
   - API Key
   - Base URL
3. 点击 **保存**

支持的服务商：
- OpenAI
- Anthropic
- DeepSeek
- MiniMax
- 阿里云百炼
- OpenRouter
- 其他 OpenAI 兼容接口

## 管理 Profile

### 创建 Profile

1. 点击左侧面板的 **+** 按钮
2. 填写配置信息：
   - **名称**：配置的唯一标识
   - **系统提示词**：定义 Agent 的角色和行为
   - **工具**：选择可用的工具
   - **温度**：控制生成的随机性
   - **最大 Token**：限制输出长度
3. 点击 **保存**

### 编辑 Profile

1. 在左侧列表中右键点击 Profile
2. 选择 **编辑**
3. 修改配置后保存

### 删除 Profile

1. 在左侧列表中右键点击 Profile
2. 选择 **删除**
3. 确认删除

## 管理会话

### 创建新会话

1. 选择一个 Profile
2. 点击 **新建会话** 按钮
3. 新会话会出现在左侧列表中

### 切换会话

在左侧会话列表中点击要切换的会话。

### 重命名会话

1. 右键点击会话
2. 选择 **重命名**
3. 输入新名称

### 删除会话

1. 右键点击会话
2. 选择 **删除**
3. 确认删除

## 进行对话

### 发送消息

1. 在底部输入框中输入消息
2. 按 **Enter** 或点击发送按钮
3. 等待 AI 响应

### 流式输出

响应会实时流式显示，您可以看到 AI 逐字生成内容。

### 工具调用

当 Agent 调用工具时，界面会显示：
- 正在执行的工具名称
- 工具执行结果

### 思维链显示

对于支持思维链的模型（如 DeepSeek），界面会显示 AI 的思考过程。

## 消息操作

### 删除最后一轮对话

点击工具栏的 **删除** 按钮，可以删除最后一轮对话（包括用户输入和 AI 回复）。

### 重发

点击工具栏的 **重发** 按钮，可以将最后一轮用户输入重新放回输入框，方便你修改后再次发送。

### 停止生成

在 AI 生成过程中，点击 **停止** 按钮可以中止生成。

## 模型选择

1. 点击顶部的模型下拉框
2. 选择要使用的模型
3. 后续对话将使用新选择的模型

:::{note}
模型列表只显示当前配置的 API 服务支持的模型。
:::

## 查看追踪日志

VNAG 会记录详细的执行追踪日志，帮助您调试 Agent：

1. 打开运行目录下的 `.vnag/log/` 目录
2. 找到当前会话对应的 `{session_id}.log` 文件（会话 ID 可在会话文件名中看到）
3. 日志包含以下信息：
   - 请求内容
   - 响应内容
   - 工具调用详情
   - Token 使用量

日志文件默认保存在运行目录的 `.vnag/log/` 下，按会话分文件保存。

## Markdown 渲染

聊天界面支持 Markdown 渲染：

- **代码块**：语法高亮
- **表格**：结构化显示
- **列表**：有序和无序列表
- **标题**：多级标题
- **链接**：可点击的链接

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 发送消息 |
| `Shift + Enter` | 换行 |

## 自定义启动

您可以自定义 UI 的启动配置：

```python
from vnag.ui.qt import run_ui

# 使用默认配置启动
run_ui()

# 或者在 examples/ui/run_chat_ui.py 中查看完整示例
```

## 常见问题

### UI 无法启动

确保已安装 PySide6：
```bash
pip install pyside6
```

### 模型列表为空

1. 检查是否已配置 API 服务
2. 检查 API Key 是否正确
3. 检查网络连接

### 工具调用失败

1. 检查工具是否正确配置
2. 查看追踪日志了解详细错误

## 下一步

- [配置指南](../configuration/index.md) - 了解所有配置选项
- [核心组件](../components/index.md) - 深入了解各个组件

