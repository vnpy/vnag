# 图形界面

VNAG 提供了基于 PySide6 的现代化图形界面，让您可以直观地管理和调试 Agent。

## 启动界面

```bash
python examples/ui/run_chat_ui.py
```

## 界面概览

Chat UI 包含以下主要区域：

| 区域 | 说明 |
|------|------|
| **菜单栏** | 功能菜单，包括 AI 服务配置、智能体配置、工具/模型浏览器等 |
| **会话列表** | 左侧面板，显示所有会话和 Profile |
| **聊天区域** | 中央区域，显示对话内容 |
| **输入区域** | 底部区域，消息输入和发送 |
| **工具栏** | 模型选择、操作按钮等 |

## 核心功能

### Profile 管理

Profile 是 Agent 的配置模板：

- **创建**：定义系统提示词、工具集、模型参数
- **编辑**：修改现有 Profile 的配置
- **删除**：移除不需要的 Profile

### 会话管理

会话是基于 Profile 创建的对话实例：

- **新建会话**：基于选定的 Profile 创建
- **切换会话**：在不同会话间切换
- **重命名**：自定义会话名称
- **删除会话**：清除对话历史

### 对话功能

- **流式输出**：实时显示 AI 响应
- **Markdown 渲染**：支持代码高亮、表格等
- **工具调用显示**：展示工具执行过程
- **思维链显示**：展示 AI 的思考过程

### 消息操作

- **删除最后一轮**：撤销最近的对话
- **重发**：将最后一轮用户输入放回输入框，方便修改后再次发送
- **停止生成**：中止正在进行的生成

## 配置管理

### AI 服务配置

通过菜单 **功能** → **AI服务配置** 打开配置对话框：

1. 选择服务商（OpenAI、Anthropic、DeepSeek 等）
2. 填写 API Key 和 Base URL
3. 保存配置

### 模型选择

在工具栏的下拉框中选择要使用的模型。列表只显示当前配置的 API 服务支持的模型。

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Enter` | 发送消息 |
| `Shift + Enter` | 换行 |

## UI 组件说明

### 主窗口 (Qt)

主窗口是应用的入口，负责：
- 初始化界面布局
- 管理菜单和工具栏
- 协调各个组件

### 会话列表 (Widget)

显示和管理会话：
- Profile 列表
- 会话列表
- 右键菜单操作

### 聊天视图 (Widget)

显示对话内容：
- Markdown 渲染
- 代码高亮
- 消息区分（用户/助手）

### 输入框 (Widget)

消息输入组件：
- 多行输入
- 快捷键支持
- 发送按钮

### 工作线程 (Worker)

后台执行任务：
- LLM 请求
- 工具调用
- 避免阻塞 UI

## 自定义启动

您可以自定义 UI 的启动方式：

```python
from vnag.ui.qt import run_ui

# 使用默认配置启动
run_ui()
```

也可以查看 `examples/ui/run_chat_ui.py` 了解完整的启动流程。

## 界面截图

运行 UI 后，您将看到类似如下的界面：

- 左侧：Profile 和会话管理
- 中央：对话区域，支持 Markdown
- 底部：消息输入框
- 顶部：模型选择和操作按钮

## 故障排除

### UI 无法启动

确保已安装 PySide6：

```bash
pip install pyside6
```

### 模型列表为空

1. 检查是否已配置 API 服务
2. 验证 API Key 是否正确
3. 确认网络可以访问 API 服务

### 工具调用失败

1. 检查工具是否正确配置在 Profile 中
2. 查看追踪日志了解详细错误信息
3. 确认 MCP 服务器已正确配置（如果使用 MCP 工具）

## 下一步

- [配置指南](../configuration/index.md) - 详细的配置说明
- [教程 - 使用图形界面](../tutorial/chat_ui.md) - UI 使用教程

